<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Facebook</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* C√°c style gi·ªØ nguy√™n nh∆∞ b·∫°n ƒë√£ c√≥ (r√∫t g·ªçn ·ªü ƒë√¢y ƒë·ªÉ ng·∫Øn g·ªçn) */
        .navbar { background: white; padding: 8px 16px; position: fixed; width: 100%; top: 0; z-index: 100; }
        .navbar-content { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; }
        .main-content { display: flex; margin-top: 60px; gap: 20px; max-width: 1200px; margin-left: auto; margin-right: auto; padding: 0 15px; }
        .sidebar, .right-sidebar { width: 280px; position: sticky; top: 60px; height: calc(100vh - 60px); overflow-y: auto; padding: 20px; }
        .feed { flex: 1; max-width: 680px; margin: 0 auto; padding: 20px; }
        .post, .friend-suggestion { background: white; border-radius: 8px; padding: 16px; margin-bottom: 20px; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
        .sidebar-item { display: flex; align-items: center; padding: 8px; border-radius: 8px; cursor: pointer; }
        .sidebar-item:hover { background: #f0f2f5; }
        .sidebar-item i { margin-right: 10px; font-size: 20px; }
        .friend-item { display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
        .friend-info { flex: 1; margin-left: 10px; }
        .friend-name { font-weight: bold; }
        .mutual-friends { font-size: 12px; color: #65676B; }
        .add-friend-btn { background-color: #1877f2; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .add-friend-btn:hover { background-color: #166fe5; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <div style="display: flex; align-items: center; gap: 10px;">
                <img src="https://www.facebook.com/images/fb_icon_325x325.png" alt="Facebook" style="width: 40px;">
                <input type="text" placeholder="T√¨m ki·∫øm tr√™n Facebook" style="padding: 8px; border-radius: 20px; border: none; background: #f0f2f5;">
            </div>
            <div style="display: flex; gap: 20px;">
				<a th:href="@{'/profile/' + ${currentUser.userId}}">
				    <i class="fas fa-user" style="cursor: pointer; color: black;"></i>
				</a>
                <i class="fas fa-comment"></i>
                <i class="fas fa-bell"></i>
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-item"><i class="fas fa-user"></i><span th:text="${currentUser.lastname} + ' ' + ${currentUser.firstname}"></span></div>
            <div class="sidebar-item"><i class="fas fa-user-friends"></i><span>B·∫°n b√®</span></div>
            <div class="sidebar-item"><i class="fas fa-users"></i><span>Nh√≥m</span></div>
            <div class="sidebar-item"><i class="fas fa-store"></i><span>Marketplace</span></div>
            <div class="sidebar-item"><i class="fas fa-play-circle"></i><span>Watch</span></div>
            <div class="sidebar-item"><i class="fas fa-history"></i><span>K·ª∑ ni·ªám</span></div>
        </div>

        <!-- Feed -->
		<div class="feed">
		    <div class="post" th:each="post : ${postsWithInteraction}">
		        <div style="display: flex; align-items: center; margin-bottom: 10px;">
		            <img th:src="${post.user.profilePicture}" style="border-radius: 50%; width: 40px; height: 40px; object-fit: cover; margin-right: 10px;">
		            <div>
		                <strong th:text="${post.user.firstname + ' ' + post.user.lastname}"></strong>
		                <div style="font-size: 12px; color: #65676B;" th:text="${#temporals.format(post.createdAt, 'dd/MM/yyyy HH:mm')}"></div>
		            </div>
		        </div>

		        <p th:text="${post.content}"></p>

		        <img th:if="${post.imageUrl}" th:src="@{${post.imageUrl}}" style="width: 100%; border-radius: 8px; margin: 10px 0;">

		        <div style="font-size: 14px; color: #65676B; margin-bottom: 5px;">
		            <span th:text="'üëç ' + ${post.likes} + ' l∆∞·ª£t th√≠ch'"></span> |
		            <span th:text="'üí¨ ' + ${post.comments} + ' b√¨nh lu·∫≠n'"></span> |
		            <span th:text="'üîÅ ' + ${post.shares} + ' l∆∞·ª£t chia s·∫ª'"></span>
		        </div>

		        <div style="display: flex; justify-content: space-between; padding: 10px 0; border-top: 1px solid #dadde1;">
		            <button class="btn"><i class="far fa-thumbs-up"></i> Th√≠ch</button>
		            <button class="btn"><i class="far fa-comment"></i> B√¨nh lu·∫≠n</button>
		            <button class="btn"><i class="far fa-share-square"></i> Chia s·∫ª</button>
		        </div>
		    </div>
		</div>


        <!-- G·ª£i √Ω b·∫°n b√® -->
        <div class="right-sidebar">
            <div class="friend-suggestion">
                <div class="suggestion-header">Nh·ªØng ng∆∞·ªùi b·∫°n c√≥ th·ªÉ bi·∫øt</div>

                <div class="friend-item" th:each="user : ${suggestions}">
                    <img th:src="${user.profilePicture}" style="border-radius: 50%; width: 50px; height: 50px; object-fit: cover;">
                    <div class="friend-info">
                        <div class="friend-name" th:text="${user.firstname + ' ' + user.lastname}"></div>
                        <div class="mutual-friends">B·∫°n chung: 5</div> <!-- C√≥ th·ªÉ t√≠nh sau -->
                    </div>
                    <button class="add-friend-btn">
                        <i class="fas fa-user-plus"></i> Th√™m b·∫°n
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
